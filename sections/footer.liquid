{% comment %}
  Section: footer.liquid
{% endcomment %}

{% comment %}
  Define font variables based on new schema settings
{% endcomment %}
{%- liquid
  assign body_font = section.settings.body_font
  assign subheading_font = section.settings.subheading_font
-%}

<style>
  /* Pass Liquid variables to CSS variables 
    so we can use them in the stylesheet
  */
  .site-footer {
    --font-body: {{ body_font.family }}, {{ body_font.fallback_families }};
    --font-body-weight: {{ body_font.weight }};
    --font-subheading: {{ subheading_font.family }}, {{ subheading_font.fallback_families }};
    --font-subheading-weight: {{ subheading_font.weight }};
  }
</style>

<footer class="site-footer" style="background: {{ section.settings.background_color }}; color: {{ section.settings.text_color }};">
  <div class="footer-container">
    
    <div class="footer-main">
      
      <div class="footer-column footer-newsletter">
        {% if section.settings.newsletter_heading != blank %}
          <h3 class="newsletter-heading">{{ section.settings.newsletter_heading | escape }}</h3>
        {% endif %}

        {%- form 'customer', class: 'newsletter-form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="newsletter-form__field-wrapper">
            <input
              id="NewsletterForm--{{ section.id }}"
              type="email"
              name="contact[email]"
              class="newsletter-form__input"
              value=""
              placeholder="Email Address"
              aria-label="Email Address"
              autocorrect="off"
              autocapitalize="off"
              required
            >
            <button type="submit" class="newsletter-form__submit" name="commit">
              Submit
            </button>
          </div>
          {%- if form.errors -%}
            <small class="newsletter-form__message form__message--error">
              {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
            </small>
          {%- endif -%}
        {%- endform -%}

        {%- if form.posted_successfully? -%}
          <p class="newsletter-form__message form__message--success">Thanks for subscribing!</p>
        {%- endif -%}

        {% if section.settings.newsletter_subtext != blank %}
          <div class="newsletter-subtext">
            {{ section.settings.newsletter_subtext }}
          </div>
        {% endif %}
      </div>
      
      {%- if section.settings.help_menu.links.size > 0 -%}
        <div class="footer-column footer-menu">
          <h3 class="footer-menu__heading">Help</h3>
          <ul class="footer-menu__list">
            {%- for link in section.settings.help_menu.links -%}
              <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}
      
      {%- if section.settings.about_menu.links.size > 0 -%}
        <div class="footer-column footer-menu">
          <h3 class="footer-menu__heading">About</h3>
          <ul class="footer-menu__list">
            {%- for link in section.settings.about_menu.links -%}
              <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}
      
      {%- if section.settings.connect_menu.links.size > 0 -%}
        <div class="footer-column footer-menu">
          <h3 class="footer-menu__heading">Connect</h3>
          <ul class="footer-menu__list">
            {%- for link in section.settings.connect_menu.links -%}
              <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}
      
      {%- if section.settings.stores_menu.links.size > 0 -%}
        <div class="footer-column footer-menu">
          <h3 class="footer-menu__heading">Stores</h3>
          <ul class="footer-menu__list">
            {%- for link in section.settings.stores_menu.links -%}
              <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}
      
    </div>
    
    <div class="footer-bottom">
      
      <div class="footer-disclaimer">
        {% if section.settings.disclaimer_text != blank %}
          {{ section.settings.disclaimer_text }}
        {% endif %}
      </div>
      
      <div class="footer-legal">
        <ul class="footer-legal__list">
          {%- if section.settings.policy_menu.links.size > 0 -%}
            {%- for link in section.settings.policy_menu.links -%}
              <li><a href="{{ link.url }}">{{ link.title }}</a></li>
            {%- endfor -%}
          {%- endif -%}
          <li class="footer-copyright">
            {{ section.settings.copyright_text | default: "© JustSteven LLC 2025" }}
          </li>
        </ul>
      </div>
      
    </div>
    
  </div>
</footer>

{% stylesheet %}
  .site-footer {
    padding: 30px 0 30px;
    font-size: 14px;
    line-height: 1.6;
    background-color: var(--footer-bg-color, #faf8f5);
    color: var(--footer-text-color, #333);
    
    /* FONT CHANGE: Set base font for whole footer */
    font-family: var(--font-body);
    font-weight: var(--font-body-weight);
  }

  .footer-container {
    /* width: 90%;
    max-width: 1300px;
    margin: 0 auto; */
    padding: 0 40px;
  }

  /* --- Part 1: Main Footer --- */
  .footer-main {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
    /* gap: 40px; */ /* Replaced this line */
    column-gap: 60px; /* Increased horizontal gap */
    row-gap: 40px; /* Kept vertical gap (for mobile) */
    padding-bottom: 40px;
  }

  /* --- Newsletter Styles --- */
  .footer-newsletter .newsletter-heading {
    /* FONT CHANGE */
    /* font-family: var(--font-body);
    font-weight: var(--font-body-weight); */
    font-size: 1.3rem;
    line-height: 2.0;
    margin: 0 0 20px;
    letter-spacing: 0.02em;
  }

  .newsletter-form__field-wrapper {
    display: flex;
    position: relative;
    border: 1px solid #ccc; 
    background-color: #fff;
  }

  .newsletter-form__input {
    flex-grow: 1;
    border: none;
    background: transparent;
    padding: 12px 15px;
    font-size: 1.1rem;
    color: var(--footer-text-color, #333);
    outline: none;
  }
  .newsletter-form__input::placeholder {
    color: #555;
    font-weight: 500;
  }
  .newsletter-form__input:focus {
    box-shadow: 0 0 0 1px #333;
  }

  .newsletter-form__submit {
    border: none;
    background: #333;
    color: #fff;
    padding: 12px 20px;
    font-size: 1rem;
    cursor: pointer;
    font-weight: 700;
  }

  .newsletter-form__message {
    margin-top: 10px;
    /* FONT CHANGE */
    /* font-family: var(--font-body);
    font-weight: var(--font-body-weight); */
  }
  .form__message--error {
    color: #c90000;
  }
  .form__message--success {
    color: #008000;
  }
  
  .newsletter-subtext {
    font-size: 12px;
    color: #777;
    margin-top: 15px;
    line-height: 1.5;
    /* CHANGE 4: Added max-width to force wrap */
    max-width: 240px;
  }

  /* --- Menu Styles --- */
  .footer-menu__heading {
    /* FONT CHANGE */
    font-family: var(--font-subheading);
    font-weight: bold;
    
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    /* CHANGE 2: Increased margin-bottom */
    margin: 0 0 24px;
  }

  .footer-menu__list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .footer-menu__list li {
    /* CHANGE 3: Decreased margin-bottom */
    margin-bottom: 6px;
  }
  .footer-menu__list a {
    text-decoration: none;
    color: inherit;
    font-size: 0.8rem;
    
    /* FONT CHANGE */
    /* font-family: var(--font-body);
    font-weight: var(--font-body-weight); */
  }
  /* .footer-menu__list a:hover {
     text-decoration: underline; 
  } */

  /* --- Part 2: Bottom Bar --- */
  .footer-bottom {
    display: flex;
    flex-direction: row;
    align-items: flex-end; /* CHANGED: This lowers both items */
    justify-content: space-between; 
    gap: 20px;
    border-top: 1px solid #ddd;
    padding-top: 30px;
    font-size: 12px;
  }

  .footer-disclaimer {
    max-width: 450px;
    margin: 0;
    line-height: 1.5;
    flex-basis: 50%; /* Gives flexible width */
    flex-shrink: 0; /* Prevents it from shrinking too much */
  }
  .footer-disclaimer p {
    margin: 0;
    font-size: 0.9rem;
    color: black;
  }

  .footer-legal {
    width: auto; /* CHANGED from 100% */
    flex-basis: 50%; /* Gives flexible width */
  }

  .footer-legal__list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap; /* Allows items to wrap on mobile */
    gap: 20px;
    /* This pushes the whole list to the right */
    justify-content: flex-end; 
  }

  .footer-legal__list a {
    text-decoration: none;
    color: inherit;
  }
  /* .footer-legal__list a:hover {
    text-decoration: underline;
  } */

  .footer-copyright {
    color: #555;
  }

  /* --- Mobile Responsive --- */
  @media (max-width: 900px) {
    .footer-main {
      grid-template-columns: 1fr;
      gap: 30px;
    }
    
    .footer-bottom {
      flex-direction: column; /* Stacks them on mobile */
      align-items: flex-start; 
      gap: 20px;
    }

    .footer-legal {
      /* LAYOUT CHANGE: Stack policy links and copyright on mobile */
      flex-direction: column;
      align-items: flex-start;
      gap: 10px;
    }
    
    .footer-legal__list {
      justify-content: flex-start;
      flex-wrap: wrap;
      gap: 15px;
    }

    .footer-copyright {
      text-align: left;
    }

    .footer-disclaimer {
      max-width: 100%;
      flex-basis: auto; /* Resets the basis for mobile */
    }
  }
  @media (max-width: 768px) {
    .footer-container {
      padding: 0 20px; /* Reduce padding on smaller screens */
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Footer",
  "tag": "footer",
  "class": "site-footer",
  "settings": [
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#faf8f5"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "font_picker",
      "id": "subheading_font",
      "label": "Subheading Font",
      "default": "assistant_n4",
      "info": "Used for menu titles (e.g., 'Help', 'About')."
    },
    {
      "type": "font_picker",
      "id": "body_font",
      "label": "Body Font",
      "default": "assistant_n4",
      "info": "Used for links, newsletter text, and legal copy."
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "text",
      "id": "newsletter_heading",
      "label": "Newsletter Heading",
      "default": "Stay up to date about product launches, makeup tips, and all things Jones Road"
    },
    {
      "type": "richtext",
      "id": "newsletter_subtext",
      "label": "Newsletter Subtext",
      "default": "<p>Sign Up For Free Shipping On Orders Over $85 USD</GAmbp>"
    },
    {
      "type": "header",
      "content": "Menus"
    },
    {
      "type": "link_list",
      "id": "help_menu",
      "label": "Help Menu"
    },
    {
      "type": "link_list",
      "id": "about_menu",
      "label": "About Menu"
    },
    {
      "type": "link_list",
      "id": "connect_menu",
      "label": "Connect Menu"
    },
    {
      "type": "link_list",
      "id":"stores_menu",
      "label": "Stores Menu"
    },
    {
      "type": "header",
      "content": "Bottom Bar"
    },
    {
      "type": "richtext",
      "id": "disclaimer_text",
      "label": "Disclaimer Text",
      "default": "<p>Bobbi Brown left her namesake company in 2016 and is no longer affiliated or associated with the Bobbi Brown Cosmetics company or the Bobbi Brown branded products</p>"
    },
    {
      "type": "link_list",
      "id": "policy_menu",
      "label": "Policy Links",
      "info": "Appears next to the copyright."
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright Text",
      "default": "© JustSteven LLC 2025"
    }
  ]
}
{% endschema %}